const VoiceTicketFab=({onTicketDetected:e})=>{const[a,t]=React.useState(!1),[o,r]=React.useState(!1),[i,s]=React.useState(null);return React.createElement("div",{className:"fixed bottom-6 right-6 z-[2000] flex flex-col items-end gap-2",style:{touchAction:"none"}},a||o?React.createElement("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-white px-4 py-2 rounded-full shadow-lg text-sm font-bold animate-fadeIn border border-gray-200 z-[2001]"},a?"üî¥ Enregistrement...":"ü§ñ Analyse..."):null,React.createElement("button",{onClick:a?()=>{i&&a&&(i.stop(),t(!1),r(!0))}:async()=>{try{const a=await navigator.mediaDevices.getUserMedia({audio:!0}),o=new MediaRecorder(a),i=[];o.ondataavailable=e=>{e.data.size>0&&i.push(e.data)},o.onstop=async()=>{const t=new Blob(i,{type:"audio/webm"});await(async a=>{const t=new FormData;t.append("file",a,"recording.webm");try{const a=await axios.post("/api/ai/analyze-ticket",t,{headers:{"Content-Type":"multipart/form-data"}});a.data&&(a.data.priority&&(a.data.priority=a.data.priority.toLowerCase()),e(a.data))}catch(e){console.error("AI Analysis failed:",e),alert("Erreur lors de l'analyse vocale: "+(e.response?.data?.error||e.message))}finally{r(!1)}})(t),a.getTracks().forEach(e=>e.stop())},o.start(),s(o),t(!0)}catch(e){console.error("Error accessing microphone:",e),alert("Impossible d'acc√©der au microphone. V√©rifiez vos permissions.")}},disabled:o,className:"w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transition-all transform active:scale-95 "+(a?"bg-red-600 animate-pulse ring-4 ring-red-300":o?"bg-gray-400 cursor-wait":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 hover:shadow-blue-500/50")},React.createElement("i",{className:`fas ${a?"fa-stop":o?"fa-spinner fa-spin":"fa-microphone"} text-white text-2xl`})))};window.VoiceTicketFab=VoiceTicketFab;