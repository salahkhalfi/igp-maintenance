const AppHeader=({currentUser:e,activeTicketsCount:t,unreadMessagesCount:a,headerTitle:s,headerSubtitle:r,showMobileMenu:l,setShowMobileMenu:n,showArchived:c,setShowArchived:o,onRefresh:i,onLogout:m,onSearch:d,onOpenCreateModal:u,onOpenMessaging:f,onOpenMachineManagement:x,onOpenPerformance:b,onOpenOverdue:p,onOpenPushDevices:g,onOpenUserManagement:h,onOpenManageColumns:R,onOpenSystemSettings:w,onOpenAdminRoles:v,onOpenTv:E,onOpenAIChat:N,onOpenPlanning:y,onOpenDetails:k,onOpenSecretariat:C,activeModules:S={planning:!0,statistics:!0,notifications:!0,messaging:!0,machines:!0},hasPermission:j=()=>!1})=>{const[P,O]=React.useState(()=>{if(e&&e.id)return e;try{const e=JSON.parse(localStorage.getItem("user_cache")||"{}");if(e&&e.id)return e}catch(e){}return{}});React.useEffect(()=>{e&&e.id&&e.id!==P?.id&&O(e)},[e]);const A=(e,t)=>{const a=P?.id,s=P?.avatar_key,r=P?.first_name?.[0]||"?";return a&&s?React.createElement("img",{src:"/api/auth/avatar/"+a+"?v="+s,alt:P?.first_name||"Avatar",className:t+" object-cover"}):React.createElement("div",{className:t+" bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold"},r)},[M,_]=React.useState(""),[I,T]=React.useState([]),[z,D]=React.useState(!1),[U,L]=React.useState(!1),[q,W]=React.useState([]),[F,V]=React.useState([]),[B,H]=React.useState({top:0,left:0,width:0}),[G,J]=React.useState(!1),[K,$]=React.useState(()=>{if("undefined"==typeof localStorage)return[];try{return JSON.parse(localStorage.getItem("search_history")||"[]")}catch{return[]}}),Q=e=>{if(!e||e.trim().length<2)return;const t=e.trim();$(e=>{const a=[t,...e.filter(e=>e!==t)].slice(0,5);return localStorage.setItem("search_history",JSON.stringify(a)),a})},X=React.useRef(null),Y=React.useRef(null),[Z,ee]=React.useState(0),[te,ae]=React.useState("undefined"!=typeof Notification?Notification.permission:"default"),[se,re]=React.useState(!1),[le]=React.useState(Date.now()),ne="/api/settings/logo?t="+le,[ce,oe]=React.useState("Connect"),[ie,me]=React.useState(!1),[de,ue]=React.useState({today:0,active:0});React.useEffect(()=>{const e=async()=>{try{await axios.post(API_URL+"/stats/heartbeat");const e=await axios.get(API_URL+"/stats/online-users");e.data&&ue(e.data)}catch(e){}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),React.useEffect(()=>{try{fetch("/api/settings/messenger_app_name").then(e=>e.json()).then(e=>{e&&e.setting_value&&oe(e.setting_value)}).catch(e=>console.warn("Failed to load messenger name",e))}catch(e){console.warn("Error fetching settings",e)}},[]),React.useEffect(()=>{const e=async()=>{if("undefined"!=typeof Notification&&ae(Notification.permission),window.isPushSubscribed){const e=await window.isPushSubscribed();re(e)}};return e(),setTimeout(e,1e3),setTimeout(e,3e3),window.addEventListener("push-notification-changed",e),()=>window.removeEventListener("push-notification-changed",e)},[]);const fe=async()=>{if(window.requestPushPermission){if("granted"===te&&se)confirm("Les notifications sont déjà activées. Voulez-vous tester une notification ?")&&navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"TEST_NOTIFICATION",title:"Test Notification",body:"Ceci est un test de fonctionnement."});else if("granted"!==te||se)await window.requestPushPermission();else if(confirm("Permission accordée mais abonnement inactif. Réactiver ?")&&(await window.subscribeToPush(),window.isPushSubscribed)){const e=await window.isPushSubscribed();re(e),e&&alert("✅ Notifications réactivées !")}}else alert("Système de notifications non initialisé. Rafraichissez la page.")},xe=window.innerWidth<768,be=xe?['Ex: "retard" tickets en retard','Ex: "urgent" tickets critiques','Ex: "commentaire" avec notes',"Machine, lieu, ticket..."]:['Essayez: "retard" pour voir les tickets en retard','Essayez: "urgent" pour voir les priorités critiques','Essayez: "commentaire" pour voir les tickets avec notes',"Ou cherchez par machine, lieu, ticket..."];React.useEffect(()=>{const e=setInterval(()=>ee(e=>(e+1)%be.length),4e3);return()=>clearInterval(e)},[be.length]),React.useEffect(()=>(document.body.style.overflow=l?"hidden":"",()=>{document.body.style.overflow=""}),[l]),React.useEffect(()=>{const e=()=>{window.innerWidth>=768&&l&&n(!1),z&&!G&&D(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l,z,G]),React.useEffect(()=>{const e=()=>{if(Y.current&&(z||G)){const e=Y.current.getBoundingClientRect();H({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[z,G]);const pe=e=>{try{return"function"==typeof j&&(!("tickets.create"!==e||!isWorkerOrAbove(P?.role))||j(e))}catch(e){return console.warn("Permission check failed:",e),!1}},ge=e=>{const t=e.target.value;_(t),X.current&&clearTimeout(X.current),t.trim().length>=2?(L(!0),X.current=setTimeout(async()=>{try{const e=await fetch("/api/search?q="+encodeURIComponent(t),{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}),a=await e.json();T(a.results||[]),W(a.keywordResults||[]),V(a.textResults||[]),D(!0),J(!0)}catch(e){console.error("Search error:",e)}finally{L(!1)}},300)):(D(!1),L(!1),J(!1))},he=P&&"supervisor"===P.role,Re=P&&"admin"===P.role,we=Re||he,ve=async()=>{if(!ie){me(!0);try{await i()}catch(e){console.error("Refresh error:",e)}finally{me(!1)}}};return React.createElement("header",{className:"sticky top-0 z-50 bg-transparent transition-all duration-300"},React.createElement("div",{className:"bg-white/95 backdrop-blur-xl shadow-sm border-b border-slate-100"},React.createElement("div",{className:"max-w-[1600px] mx-auto px-3 md:px-4 py-2"},React.createElement("div",{className:"flex justify-between items-center h-12 md:h-12"},React.createElement("div",{className:"flex items-center group cursor-pointer flex-1 min-w-0 mr-2",onClick:()=>window.location.reload()},React.createElement("img",{src:ne,alt:"Logo",className:"h-8 md:h-9 w-auto object-contain transition-transform duration-300 group-hover:scale-105 shrink-0",onError:e=>{e.target.src.includes("logo.png")||(e.target.src="/logo.png")}}),React.createElement("div",{className:"md:hidden flex flex-col justify-center ml-1.5 pl-1.5 border-l border-slate-200 flex-1 min-w-0 overflow-hidden"},React.createElement("h1",{className:"text-[10px] font-bold leading-tight text-slate-800 tracking-tight truncate",title:s},s),React.createElement("p",{className:"text-[8px] font-medium text-slate-400 truncate"},r)),React.createElement("div",{className:"hidden md:flex flex-col justify-center ml-3 pl-3 border-l border-slate-200 flex-1 min-w-0"},React.createElement("h1",{className:"text-sm font-bold leading-none text-slate-800 tracking-tight truncate",title:s},s),React.createElement("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5 truncate"},r))),("admin"===P?.role||"supervisor"===P?.role)&&de.active>0&&React.createElement("div",{className:"hidden md:flex items-center gap-1.5 px-2.5 py-1 bg-emerald-50 border border-emerald-200 rounded-full text-emerald-700 text-xs font-medium",title:`${de.active} actif(s) dans l'heure, ${de.today} connecté(s) aujourd'hui`},React.createElement("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),React.createElement("span",{},de.active+" en ligne")),React.createElement("div",{className:"flex items-center gap-1.5 md:gap-3 shrink-0"},React.createElement("div",{className:"md:hidden flex items-center gap-1.5 px-1.5 py-1 bg-gradient-to-r from-slate-50 to-white rounded-xl border border-slate-200/80 shadow-sm"},A(0,"w-7 h-7 rounded-lg shadow-sm"),React.createElement("div",{className:"flex flex-col items-start max-w-[70px]"},React.createElement("span",{className:"text-[9px] font-bold text-slate-700 leading-tight truncate w-full"},P?.first_name||"User"),React.createElement("span",{className:"text-[7px] font-semibold leading-none mt-0.5 "+("admin"===P?.role?"text-amber-600":"supervisor"===P?.role?"text-blue-600":"text-slate-400")},"admin"===P?.role?"Admin":"supervisor"===P?.role?"Superviseur":"technician"===P?.role?"Tech":"Opérateur"))),React.createElement("div",{className:"hidden md:flex items-center px-3 py-1.5 rounded-full bg-slate-50 border border-slate-200 cursor-default"},A(0,"w-6 h-6 rounded-full mr-2"),React.createElement("span",{className:"text-xs font-medium text-slate-700"},"Bonjour, "+(P?.first_name||"Utilisateur")),("admin"===P?.role||"supervisor"===P?.role)&&React.createElement("span",{className:"ml-2 px-1.5 py-0.5 text-[9px] font-bold bg-slate-200 text-slate-600 rounded uppercase tracking-wide"},"supervisor"===P?.role?"SUP":"ADM")),S.notifications&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full transition-all "+("granted"===te&&se?"text-teal-600 hover:bg-teal-50":"text-slate-400 hover:text-slate-600"),onClick:fe,title:"Connecter cet appareil aux notifications"},React.createElement("i",{className:"fas "+("granted"===te&&se?"fa-bell":"fa-bell-slash")})),React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-purple-600 transition-all",onClick:N,title:"Expert Industriel (IA)"},React.createElement("i",{className:"fas fa-robot"})),("admin"===P?.role||"supervisor"===P?.role)&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-indigo-600 transition-all",onClick:C,title:"Secrétariat"},React.createElement("i",{className:"fas fa-file-signature"})),React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-emerald-600 hover:bg-emerald-50 hover:text-emerald-700 transition-all relative",onClick:()=>window.open("/messenger","_blank"),title:(ce||"Connect")+" - Messagerie instantanée"},React.createElement("i",{className:"fas fa-rocket"}),React.createElement("span",{className:"absolute top-0 right-0 w-2 h-2 bg-emerald-500 rounded-full border border-white"})),React.createElement("button",{className:"w-10 h-10 md:w-10 md:h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 text-white hover:from-slate-600 hover:to-slate-700 shadow-lg shadow-slate-400/30 active:scale-95 transition-all ml-1 md:ml-2",onClick:()=>n(!l),title:"Ouvrir le menu complet"},React.createElement("i",{className:"fas "+(l?"fa-times":"fa-bars")+" text-base"})))))),React.createElement("div",{className:"hidden md:block bg-white/80 border-b border-slate-200/60 shadow-sm"},React.createElement("div",{className:"max-w-[1600px] mx-auto px-4 py-3"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("div",{className:"relative flex-1 max-w-3xl z-40"},React.createElement("div",{className:"relative group"},React.createElement("i",{className:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors"}),React.createElement("input",{ref:Y,id:"search-desktop",name:"search",type:"text",placeholder:be[Z],className:"w-full h-11 pl-11 pr-12 bg-white border border-slate-200 rounded-xl shadow-sm text-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all outline-none",value:M,onChange:ge,onFocus:()=>{},onBlur:()=>setTimeout(()=>{D(!1),J(!1)},300),onKeyDown:e=>{"Enter"===e.key&&M.length>=2&&(Q(M),D(!1),J(!1),Y.current?.blur()),"Escape"===e.key&&(D(!1),J(!1))}}),M&&React.createElement("button",{onClick:()=>{_(""),J(!1),D(!1),Y.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500 p-1",title:"Effacer la recherche"},React.createElement("i",{className:"fas fa-times-circle"})),U&&React.createElement("i",{className:"fas fa-spinner fa-spin absolute right-3 top-1/2 -translate-y-1/2 text-blue-500"}),!M&&!U&&React.createElement("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=!G;J(t),D(t)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-300 hover:text-blue-500 p-1",title:"Afficher les filtres rapides et l'historique"},React.createElement("i",{className:"fas fa-chevron-down text-xs"})))),React.createElement("div",{className:"flex items-center gap-2 border-l border-slate-200 pl-4 mr-auto"},React.createElement("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-orange-50 hover:text-orange-700 transition-colors",title:"Voir uniquement les tickets en retard"},React.createElement("i",{className:"fas fa-clock text-orange-500"}),"Retard"),we&&React.createElement("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-blue-50 hover:text-blue-700 transition-colors",title:"Afficher les statistiques de performance"},React.createElement("i",{className:"fas fa-chart-line text-blue-500"}),"Performance"),Re&&React.createElement("button",{onClick:R,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-slate-100 transition-colors",title:"Configurer l'affichage des colonnes Kanban"},React.createElement("i",{className:"fas fa-columns text-slate-400"}),"Vues"),pe("planning.read")&&S.planning&&React.createElement("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-indigo-50 hover:text-indigo-700 transition-colors",title:"Consulter le planning de production"},React.createElement("i",{className:"fas fa-calendar-alt text-indigo-500"}),"Planning"),Re&&React.createElement("span",{className:"w-px h-5 bg-slate-300 mx-1"}),Re&&pe("settings.manage")&&React.createElement("button",{onClick:w,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-gray-100 hover:text-gray-800 transition-colors",title:"Paramètres système"},React.createElement("i",{className:"fas fa-cog text-gray-500"}),"Paramètres"),Re&&pe("users.read")&&React.createElement("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-indigo-50 hover:text-indigo-700 transition-colors",title:"Gestion des utilisateurs"},React.createElement("i",{className:"fas fa-users text-indigo-500"}),"Utilisateurs"),Re&&pe("machines.read")&&S.machines&&React.createElement("button",{onClick:x,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-teal-50 hover:text-teal-700 transition-colors",title:"Gestion du parc machines"},React.createElement("i",{className:"fas fa-cogs text-teal-500"}),"Machines")),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("span",{className:"hidden xl:inline-block text-xs font-extrabold text-blue-800 mr-2 bg-blue-50 px-2 py-1 rounded-md",title:"Nombre total de tickets en cours de traitement"},t+" actifs"),React.createElement("button",{onClick:ve,disabled:ie,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-50 border border-slate-200 text-slate-500 hover:bg-white hover:text-blue-600 hover:shadow-md hover:-translate-y-0.5 transition-all "+(ie?"opacity-60 cursor-wait":""),title:ie?"Actualisation en cours...":"Actualiser les données maintenant"},React.createElement("i",{className:"fas fa-sync-alt"+(ie?" fa-spin":"")})),pe("tickets.create")&&React.createElement("button",{onClick:u,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 hover:-translate-y-0.5 hover:scale-105 active:scale-95 transition-all",title:"Créer un nouveau ticket de maintenance ou scanner un QR code"},React.createElement("i",{className:"fas fa-plus-circle text-lg"}),React.createElement("span",{},"Nouveau Ticket")))))),React.createElement("div",{className:"md:hidden px-4 py-2 bg-white border-b border-slate-100 flex items-center gap-2"},React.createElement("div",{className:"relative flex-1"},React.createElement("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),React.createElement("input",{ref:xe?Y:null,id:"search-mobile",name:"search",type:"text",placeholder:"Rechercher...",className:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-blue-500",value:M,onChange:ge,onFocus:()=>{D(!0),J(!0)}})),React.createElement("button",{onClick:N,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-purple-50 text-purple-600 border border-purple-100 shadow-sm active:scale-95 shrink-0",title:"Expert Industriel"},React.createElement("i",{className:"fas fa-robot"})),React.createElement("button",{onClick:()=>window.open("/messenger","_blank"),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-emerald-50 text-emerald-600 border border-emerald-100 shadow-sm active:scale-95 relative shrink-0",title:ce},React.createElement("i",{className:"fas fa-rocket"}),React.createElement("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-500 rounded-full border border-white"})),pe("tickets.create")&&React.createElement("button",{onClick:u,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-blue-600 text-white shadow-md active:scale-95",title:"Nouveau Ticket"},React.createElement("i",{className:"fas fa-plus"}))),(z||G)&&(q.length>0||F.length>0||!M&&G)&&"undefined"!=typeof ReactDOM&&ReactDOM.createPortal(React.createElement("div",{className:"bg-white border-2 border-gray-300 rounded-lg shadow-2xl overflow-y-auto",style:{position:"absolute",zIndex:99999,top:B.top+2+"px",left:B.left+"px",width:B.width+"px",minWidth:"320px",maxHeight:"400px"},onMouseDown:e=>e.stopPropagation(),onTouchStart:()=>{document.activeElement===Y.current&&Y.current?.blur()}},React.createElement("div",{className:"sticky top-0 right-0 float-right bg-white p-2 m-2 rounded-full shadow-md z-10"},React.createElement("button",{onClick:e=>{e.stopPropagation(),D(!1),J(!1)}},React.createElement("i",{className:"fas fa-times text-sm"}))),q.map(e=>React.createElement("div",{key:"kw-"+e.id,className:"p-3 border-b hover:bg-red-50 cursor-pointer",onClick:()=>{Q(M),k(e.id),D(!1),J(!1)}},e.title)),F.map(e=>React.createElement("div",{key:"txt-"+e.id,className:"p-3 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{Q(M),k(e.id),D(!1),J(!1)}},e.title)),!M&&G&&React.createElement("div",{className:"p-2"},React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"px-2 py-1 text-xs font-bold text-gray-400 uppercase tracking-widest flex justify-between items-center"},"Récents",K.length>0&&React.createElement("button",{onClick:e=>{e.stopPropagation(),$([]),localStorage.removeItem("search_history")},className:"text-[10px] text-red-400 hover:text-red-600"},"Effacer")),0===K.length?React.createElement("div",{className:"px-3 py-2 text-xs text-gray-400 italic"},"Vos dernières recherches apparaîtront ici..."):K.map(e=>React.createElement("div",{key:e,onClick:()=>{_(e),ge({target:{value:e}})},className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group text-gray-600 hover:text-blue-600"},React.createElement("i",{className:"fas fa-history text-gray-300 group-hover:text-blue-400"}),React.createElement("span",{className:"font-medium"},e)))),React.createElement("div",{},React.createElement("div",{className:"px-2 py-1 text-xs font-bold text-gray-400 uppercase tracking-widest"},"Filtres Rapides"),React.createElement("div",{className:"grid grid-cols-2 gap-2 mt-1"},React.createElement("button",{onClick:()=>{_("urgent"),ge({target:{value:"urgent"}})},className:"flex items-center justify-center gap-2 p-2 bg-red-50 text-red-600 rounded-lg border border-red-100 hover:bg-red-100 transition"},React.createElement("i",{className:"fas fa-fire"}),"Urgent"),React.createElement("button",{onClick:()=>{_("retard"),ge({target:{value:"retard"}})},className:"flex items-center justify-center gap-2 p-2 bg-orange-50 text-orange-600 rounded-lg border border-orange-100 hover:bg-orange-100 transition"},React.createElement("i",{className:"fas fa-clock"}),"Retard"),React.createElement("button",{onClick:()=>{_("panne"),ge({target:{value:"panne"}})},className:"flex items-center justify-center gap-2 p-2 bg-gray-50 text-gray-600 rounded-lg border border-gray-200 hover:bg-gray-100 transition"},React.createElement("i",{className:"fas fa-tools"}),"Panne"),React.createElement("button",{onClick:()=>{_("maintenance"),ge({target:{value:"maintenance"}})},className:"flex items-center justify-center gap-2 p-2 bg-blue-50 text-blue-600 rounded-lg border border-blue-100 hover:bg-blue-100 transition"},React.createElement("i",{className:"fas fa-wrench"}),"Maint."))))),document.body),l&&"undefined"!=typeof ReactDOM&&ReactDOM.createPortal(React.createElement("div",{className:"fixed inset-0 z-[9999]",onClick:()=>n(!1)},React.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/60 via-slate-800/50 to-slate-900/60 backdrop-blur-md"}),React.createElement("div",{className:"absolute top-0 right-0 h-full w-[88%] max-w-[340px] bg-gradient-to-b from-slate-50 to-white flex flex-col overflow-hidden shadow-[-8px_0_30px_-5px_rgba(0,0,0,0.3)]",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"relative px-5 pt-5 pb-4 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800"},React.createElement("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white/80 hover:text-white transition-all"},React.createElement("i",{className:"fas fa-times text-sm"})),React.createElement("div",{className:"flex items-center gap-3"},A(0,"w-12 h-12 rounded-2xl shadow-lg shadow-blue-500/30 border-2 border-white/20"),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("h3",{className:"text-white font-bold text-base truncate"},P?.first_name||"Utilisateur"),React.createElement("p",{className:"text-slate-400 text-xs truncate"},P?.email||""))),P?.role&&React.createElement("div",{className:"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider "+("admin"===P?.role?"bg-amber-500/20 text-amber-300":"supervisor"===P?.role?"bg-blue-500/20 text-blue-300":"bg-slate-500/20 text-slate-300")},React.createElement("i",{className:"fas fa-shield-alt text-[8px]"}),"admin"===P?.role?"Administrateur":"supervisor"===P?.role?"Superviseur":"technician"===P?.role?"Technicien":"Opérateur")),React.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4",style:{WebkitOverflowScrolling:"touch"}},React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1 flex items-center gap-2"},React.createElement("i",{className:"fas fa-bolt text-blue-500"}),"Mes Actions"),React.createElement("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},React.createElement("button",{onClick:()=>{p(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-orange-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-md shadow-orange-500/20"},React.createElement("i",{className:"fas fa-clock text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Tickets en Retard")),React.createElement("button",{onClick:()=>{o(!c),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center shadow-md shadow-slate-400/20"},React.createElement("i",{className:"fas fa-archive text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Tickets Archivés")),we&&React.createElement("button",{onClick:()=>{b(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-blue-50/50 transition-colors"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center shadow-md shadow-blue-500/20"},React.createElement("i",{className:"fas fa-chart-line text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Statistiques")))),React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1 flex items-center gap-2"},React.createElement("i",{className:"fas fa-wrench text-purple-500"}),"Outils"),React.createElement("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},React.createElement("button",{onClick:()=>{N(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-purple-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center shadow-md shadow-purple-500/20"},React.createElement("i",{className:"fas fa-robot text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Expert Industriel (IA)")),("admin"===P?.role||"supervisor"===P?.role)&&React.createElement("button",{onClick:()=>{C(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-indigo-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center shadow-md shadow-indigo-500/20"},React.createElement("i",{className:"fas fa-file-signature text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Secrétariat")),React.createElement("button",{onClick:()=>{window.open("/messenger","_blank"),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-emerald-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center shadow-md shadow-emerald-500/20"},React.createElement("i",{className:"fas fa-rocket text-white text-sm"})),React.createElement("div",{className:"flex-1 text-left"},React.createElement("span",{className:"text-sm font-semibold text-slate-700 block"},ce),React.createElement("span",{className:"text-[10px] text-slate-500"},"Messagerie")),React.createElement("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-md text-[9px] font-bold uppercase"},"Nouveau")),React.createElement("button",{onClick:()=>{fe()},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors"},React.createElement("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center shadow-md "+("granted"===te&&se?"bg-gradient-to-br from-teal-400 to-emerald-500 shadow-teal-500/20":"bg-gradient-to-br from-slate-300 to-slate-400 shadow-slate-400/20")},React.createElement("i",{className:"fas fa-bell text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Notifications Push"),React.createElement("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold "+("granted"===te&&se?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500")},"granted"===te&&se?"Activé":"Inactif")))),React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1 flex items-center gap-2"},React.createElement("i",{className:"fas fa-cog text-indigo-500"}),"Administration"),React.createElement("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},React.createElement("div",{className:"px-3 py-2 bg-slate-50 border-b border-slate-200"},React.createElement("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-wider"},"Gestion")),(pe("users.read")||"technician"===P?.role)&&React.createElement("button",{onClick:()=>{h(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center shadow-md shadow-indigo-500/20"},React.createElement("i",{className:"fas fa-users text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Utilisateurs")),pe("machines.read")&&S.machines&&React.createElement("button",{onClick:()=>{x(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center shadow-md shadow-teal-500/20"},React.createElement("i",{className:"fas fa-cogs text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Machines")),pe("planning.read")&&S.planning&&React.createElement("button",{onClick:()=>{y(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center shadow-md shadow-blue-500/20"},React.createElement("i",{className:"fas fa-calendar-alt text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Planning Production")),Re&&React.createElement("div",{className:"px-3 py-2 bg-slate-50 border-b border-slate-200"},React.createElement("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-wider"},"Paramètres")),Re&&pe("settings.manage")&&React.createElement("button",{onClick:()=>{R(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-400 to-slate-600 flex items-center justify-center shadow-md shadow-slate-500/20"},React.createElement("i",{className:"fas fa-columns text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Colonnes Kanban")),Re&&pe("settings.manage")&&React.createElement("button",{onClick:()=>{w(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-500 to-slate-700 flex items-center justify-center shadow-md shadow-slate-600/20"},React.createElement("i",{className:"fas fa-cog text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Paramètres Système")),Re&&React.createElement("button",{onClick:()=>{g(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-violet-400 to-purple-500 flex items-center justify-center shadow-md shadow-violet-500/20"},React.createElement("i",{className:"fas fa-mobile-alt text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Mes Appareils")),Re&&pe("settings.manage")&&React.createElement("button",{onClick:()=>{E(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shadow-md shadow-purple-500/20"},React.createElement("i",{className:"fas fa-tv text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Mode TV"))))),React.createElement("div",{className:"px-4 py-4 bg-slate-50 border-t border-slate-200"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:async()=>{await ve(),n(!1)},disabled:ie,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 font-semibold text-sm hover:bg-slate-50 active:scale-95 transition-all shadow-sm "+(ie?"opacity-60 cursor-wait":"")},React.createElement("i",{className:"fas fa-sync-alt"+(ie?" fa-spin":"")}),ie?"Actualisation...":"Actualiser"),React.createElement("button",{onClick:()=>{m(),n(!1)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-slate-800 rounded-xl text-white font-semibold text-sm hover:bg-slate-700 active:scale-95 transition-all shadow-sm"},React.createElement("i",{className:"fas fa-sign-out-alt"}),"Déconnexion"))))),document.body))};window.AppHeader=AppHeader;