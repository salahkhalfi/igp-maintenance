const AppHeader=({currentUser:e,activeTicketsCount:t,unreadMessagesCount:a,headerTitle:s,headerSubtitle:r,showMobileMenu:l,setShowMobileMenu:n,showArchived:c,setShowArchived:o,onRefresh:i,onLogout:m,onSearch:d,onOpenCreateModal:u,onOpenMessaging:f,onOpenMachineManagement:x,onOpenPerformance:b,onOpenOverdue:p,onOpenPushDevices:g,onOpenUserManagement:h,onOpenManageColumns:w,onOpenSystemSettings:R,onOpenAdminRoles:v,onOpenTv:E,onOpenAIChat:N,onOpenPlanning:y,onOpenDetails:k,activeModules:C={planning:!0,statistics:!0,notifications:!0,messaging:!0,machines:!0},hasPermission:j=()=>!1})=>{const S=React.useMemo(()=>{if(e)return e;try{return JSON.parse(localStorage.getItem("user_cache")||"{}")}catch(e){return{}}},[e]),[P,O]=React.useState(""),[_,M]=React.useState([]),[T,A]=React.useState(!1),[I,z]=React.useState(!1),[D,U]=React.useState([]),[q,L]=React.useState([]),[F,G]=React.useState({top:0,left:0,width:0}),[W,V]=React.useState(!1),[B,H]=React.useState(()=>{if("undefined"==typeof localStorage)return[];try{return JSON.parse(localStorage.getItem("search_history")||"[]")}catch{return[]}}),J=e=>{if(!e||e.trim().length<2)return;const t=e.trim();H(e=>{const a=[t,...e.filter(e=>e!==t)].slice(0,5);return localStorage.setItem("search_history",JSON.stringify(a)),a})},K=React.useRef(null),Q=React.useRef(null),[X,Y]=React.useState(0),[Z,$]=React.useState("undefined"!=typeof Notification?Notification.permission:"default"),[ee,te]=React.useState(!1),[ae]=React.useState(Date.now()),se="/api/settings/logo?t="+ae,[re,le]=React.useState("Connect");React.useEffect(()=>{try{fetch("/api/settings/messenger_app_name").then(e=>e.json()).then(e=>{e&&e.setting_value&&le(e.setting_value)}).catch(e=>console.warn("Failed to load messenger name",e))}catch(e){console.warn("Error fetching settings",e)}},[]),React.useEffect(()=>{const e=async()=>{if("undefined"!=typeof Notification&&$(Notification.permission),window.isPushSubscribed){const e=await window.isPushSubscribed();te(e)}};return e(),setTimeout(e,1e3),setTimeout(e,3e3),window.addEventListener("push-notification-changed",e),()=>window.removeEventListener("push-notification-changed",e)},[]);const ne=async()=>{if(window.requestPushPermission){if("granted"===Z&&ee)confirm("Les notifications sont déjà activées. Voulez-vous tester une notification ?")&&navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"TEST_NOTIFICATION",title:"Test Notification",body:"Ceci est un test de fonctionnement."});else if("granted"!==Z||ee)await window.requestPushPermission();else if(confirm("Permission accordée mais abonnement inactif. Réactiver ?")&&(await window.subscribeToPush(),window.isPushSubscribed)){const e=await window.isPushSubscribed();te(e),e&&alert("✅ Notifications réactivées !")}}else alert("Système de notifications non initialisé. Rafraichissez la page.")},ce=window.innerWidth<768,oe=ce?['Ex: "retard" tickets en retard','Ex: "urgent" tickets critiques','Ex: "commentaire" avec notes',"Machine, lieu, ticket..."]:['Essayez: "retard" pour voir les tickets en retard','Essayez: "urgent" pour voir les priorités critiques','Essayez: "commentaire" pour voir les tickets avec notes',"Ou cherchez par machine, lieu, ticket..."];React.useEffect(()=>{const e=setInterval(()=>Y(e=>(e+1)%oe.length),4e3);return()=>clearInterval(e)},[oe.length]),React.useEffect(()=>(document.body.style.overflow=l?"hidden":"",()=>{document.body.style.overflow=""}),[l]),React.useEffect(()=>{const e=()=>{window.innerWidth>=768&&l&&n(!1),T&&!W&&A(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l,T,W]),React.useEffect(()=>{const e=()=>{if(Q.current&&(T||W)){const e=Q.current.getBoundingClientRect();G({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[T,W]);const ie=e=>{try{return"function"==typeof j&&("tickets.create"===e&&"technician"===S?.role||j(e))}catch(e){return console.warn("Permission check failed:",e),!1}},me=e=>{const t=e.target.value;O(t),K.current&&clearTimeout(K.current),t.trim().length>=2?(z(!0),K.current=setTimeout(async()=>{try{const e=await fetch("/api/search?q="+encodeURIComponent(t),{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}),a=await e.json();M(a.results||[]),U(a.keywordResults||[]),L(a.textResults||[]),A(!0),V(!0)}catch(e){console.error("Search error:",e)}finally{z(!1)}},300)):(A(!1),z(!1),V(!1))},de=S&&"supervisor"===S.role,ue=S&&"admin"===S.role,fe=ue||de;return React.createElement("header",{className:"sticky top-0 z-50 bg-transparent transition-all duration-300"},React.createElement("div",{className:"bg-white/95 backdrop-blur-xl shadow-sm border-b border-slate-100"},React.createElement("div",{className:"max-w-[1600px] mx-auto px-3 md:px-4 py-2"},React.createElement("div",{className:"flex justify-between items-center h-12 md:h-12"},React.createElement("div",{className:"flex items-center group cursor-pointer flex-1 min-w-0 mr-2",onClick:()=>window.location.reload()},React.createElement("img",{src:se,alt:"Logo",className:"h-8 md:h-9 w-auto object-contain transition-transform duration-300 group-hover:scale-105 shrink-0",onError:e=>{e.target.src.includes("logo.png")||(e.target.src="/logo.png")}}),React.createElement("div",{className:"md:hidden flex flex-col justify-center ml-1.5 pl-1.5 border-l border-slate-200 flex-1 min-w-0 overflow-hidden"},React.createElement("h1",{className:"text-[10px] font-bold leading-tight text-slate-800 tracking-tight truncate",title:s},s),React.createElement("p",{className:"text-[8px] font-medium text-slate-400 truncate"},r)),React.createElement("div",{className:"hidden md:flex flex-col justify-center ml-3 pl-3 border-l border-slate-200 flex-1 min-w-0"},React.createElement("h1",{className:"text-sm font-bold leading-none text-slate-800 tracking-tight truncate",title:s},s),React.createElement("p",{className:"text-[10px] font-medium text-slate-500 mt-0.5 truncate"},r))),React.createElement("div",{className:"flex items-center gap-1.5 md:gap-3 shrink-0"},React.createElement("div",{className:"md:hidden flex items-center gap-1.5 px-1.5 py-1 bg-gradient-to-r from-slate-50 to-white rounded-xl border border-slate-200/80 shadow-sm"},React.createElement("img",{src:"/api/auth/avatar/"+(S?.id||0)+"?v="+(S?.avatar_key||"default"),alt:S?.first_name||"User",className:"w-7 h-7 rounded-lg object-cover shadow-sm bg-gradient-to-br from-blue-400 to-indigo-600"}),React.createElement("div",{className:"flex flex-col items-start max-w-[70px]"},React.createElement("span",{className:"text-[9px] font-bold text-slate-700 leading-tight truncate w-full"},S?.first_name||"User"),React.createElement("span",{className:"text-[7px] font-semibold leading-none mt-0.5 "+("admin"===S?.role?"text-amber-600":"supervisor"===S?.role?"text-blue-600":"text-slate-400")},"admin"===S?.role?"Admin":"supervisor"===S?.role?"Superviseur":"technician"===S?.role?"Tech":"Opérateur"))),React.createElement("div",{className:"hidden md:flex items-center px-3 py-1.5 rounded-full bg-slate-50 border border-slate-200 cursor-default"},React.createElement("img",{src:"/api/auth/avatar/"+(S?.id||0)+"?v="+(S?.avatar_key||"default"),alt:S?.first_name||"User",className:"w-6 h-6 rounded-full object-cover mr-2 bg-gradient-to-br from-blue-400 to-indigo-600"}),React.createElement("span",{className:"text-xs font-medium text-slate-700"},"Bonjour, "+(S?.first_name||"Utilisateur")),("admin"===S?.role||"supervisor"===S?.role)&&React.createElement("span",{className:"ml-2 px-1.5 py-0.5 text-[9px] font-bold bg-slate-200 text-slate-600 rounded uppercase tracking-wide"},"supervisor"===S?.role?"SUP":"ADM")),C.notifications&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full transition-all "+("granted"===Z&&ee?"text-teal-600 hover:bg-teal-50":"text-slate-400 hover:text-slate-600"),onClick:ne,title:"Connecter cet appareil aux notifications"},React.createElement("i",{className:"fas "+("granted"===Z&&ee?"fa-bell":"fa-bell-slash")})),ue&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-purple-600 transition-all",onClick:g,title:"Gérer les appareils connectés"},React.createElement("i",{className:"fas fa-mobile-alt"})),React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-purple-600 transition-all",onClick:N,title:"Expert Industriel (IA)"},React.createElement("i",{className:"fas fa-robot"})),React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-emerald-600 hover:bg-emerald-50 hover:text-emerald-700 transition-all relative",onClick:()=>window.open("/messenger","_blank"),title:(re||"Connect")+" (Nouvelle Messagerie)"},React.createElement("i",{className:"fas fa-rocket"}),React.createElement("span",{className:"absolute top-0 right-0 w-2 h-2 bg-emerald-500 rounded-full border border-white"})),(ie("users.read")||"technician"===S?.role)&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-indigo-600 transition-all",onClick:h,title:"Gérer les utilisateurs et équipes"},React.createElement("i",{className:"fas fa-users"})),ue&&ie("roles.read")&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-blue-600 transition-all",onClick:v,title:"Configurer les rôles et permissions"},React.createElement("i",{className:"fas fa-shield-alt"})),ie("machines.read")&&C.machines&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-teal-600 transition-all",onClick:x,title:"Gérer le parc machines"},React.createElement("i",{className:"fas fa-cogs"})),ue&&ie("settings.manage")&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-gray-700 transition-all",onClick:R,title:"Paramètres généraux du système"},React.createElement("i",{className:"fas fa-cog"})),ue&&ie("settings.manage")&&React.createElement("button",{className:"hidden md:flex w-8 h-8 items-center justify-center rounded-full text-slate-500 hover:bg-slate-50 hover:text-purple-600 transition-all",onClick:E,title:"Passer en mode affichage TV"},React.createElement("i",{className:"fas fa-tv"})),React.createElement("button",{className:"w-10 h-10 md:w-10 md:h-10 flex items-center justify-center rounded-xl bg-gradient-to-br from-slate-700 to-slate-800 text-white hover:from-slate-600 hover:to-slate-700 shadow-lg shadow-slate-400/30 active:scale-95 transition-all ml-1 md:ml-2",onClick:()=>n(!l),title:"Ouvrir le menu complet"},React.createElement("i",{className:"fas "+(l?"fa-times":"fa-bars")+" text-base"})))))),React.createElement("div",{className:"hidden md:block bg-white/80 border-b border-slate-200/60 shadow-sm"},React.createElement("div",{className:"max-w-[1600px] mx-auto px-4 py-3"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("div",{className:"relative flex-1 max-w-3xl z-40"},React.createElement("div",{className:"relative group"},React.createElement("i",{className:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors"}),React.createElement("input",{ref:Q,type:"text",placeholder:oe[X],className:"w-full h-11 pl-11 pr-12 bg-white border border-slate-200 rounded-xl shadow-sm text-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all outline-none",value:P,onChange:me,onFocus:()=>{A(P.length>=2),V(!0)},onBlur:()=>setTimeout(()=>{W||A(!1)},200),onKeyDown:e=>{"Enter"===e.key&&P.length>=2&&(J(P),A(!1),V(!1),Q.current?.blur())}}),P&&React.createElement("button",{onClick:()=>{O(""),V(!1),A(!1),Q.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500 p-1",title:"Effacer la recherche"},React.createElement("i",{className:"fas fa-times-circle"})),I&&React.createElement("i",{className:"fas fa-spinner fa-spin absolute right-3 top-1/2 -translate-y-1/2 text-blue-500"}),!P&&!I&&React.createElement("button",{onClick:()=>{V(!W),A(!T)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-300 hover:text-blue-500 p-1",title:"Afficher les filtres rapides et l'historique"},React.createElement("i",{className:"fas fa-chevron-down text-xs"})))),React.createElement("div",{className:"flex items-center gap-2 border-l border-slate-200 pl-4 mr-auto"},React.createElement("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-orange-50 hover:text-orange-700 transition-colors",title:"Voir uniquement les tickets en retard"},React.createElement("i",{className:"fas fa-clock text-orange-500"}),"Retard"),fe&&React.createElement("button",{onClick:b,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-blue-50 hover:text-blue-700 transition-colors",title:"Afficher les statistiques de performance"},React.createElement("i",{className:"fas fa-chart-line text-blue-500"}),"Performance"),ue&&React.createElement("button",{onClick:w,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-slate-100 transition-colors",title:"Configurer l'affichage des colonnes Kanban"},React.createElement("i",{className:"fas fa-columns text-slate-400"}),"Vues"),ie("planning.read")&&C.planning&&React.createElement("button",{onClick:y,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold text-slate-600 hover:bg-indigo-50 hover:text-indigo-700 transition-colors",title:"Consulter le planning de production"},React.createElement("i",{className:"fas fa-calendar-alt text-indigo-500"}),"Planning")),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("span",{className:"hidden xl:inline-block text-xs font-extrabold text-blue-800 mr-2 bg-blue-50 px-2 py-1 rounded-md",title:"Nombre total de tickets en cours de traitement"},t+" actifs"),React.createElement("button",{onClick:i,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-50 border border-slate-200 text-slate-500 hover:bg-white hover:text-blue-600 hover:shadow-md hover:-translate-y-0.5 transition-all",title:"Actualiser les données maintenant"},React.createElement("i",{className:"fas fa-sync-alt"})),ie("tickets.create")&&React.createElement("button",{onClick:u,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 hover:-translate-y-0.5 hover:scale-105 active:scale-95 transition-all",title:"Créer un nouveau ticket de maintenance ou scanner un QR code"},React.createElement("i",{className:"fas fa-plus-circle text-lg"}),React.createElement("span",{},"Nouveau Ticket")))))),React.createElement("div",{className:"md:hidden px-4 py-2 bg-white border-b border-slate-100 flex items-center gap-2"},React.createElement("div",{className:"relative flex-1"},React.createElement("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),React.createElement("input",{ref:ce?Q:null,type:"text",placeholder:"Rechercher...",className:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-blue-500",value:P,onChange:me,onFocus:()=>{A(!0),V(!0)}})),React.createElement("button",{onClick:N,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-purple-50 text-purple-600 border border-purple-100 shadow-sm active:scale-95 shrink-0",title:"Expert Industriel"},React.createElement("i",{className:"fas fa-robot"})),React.createElement("button",{onClick:()=>window.open("/messenger","_blank"),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-emerald-50 text-emerald-600 border border-emerald-100 shadow-sm active:scale-95 relative shrink-0",title:re},React.createElement("i",{className:"fas fa-rocket"}),React.createElement("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-500 rounded-full border border-white"})),ie("tickets.create")&&React.createElement("button",{onClick:u,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-blue-600 text-white shadow-md active:scale-95",title:"Nouveau Ticket"},React.createElement("i",{className:"fas fa-plus"}))),(T||W)&&(D.length>0||q.length>0||!P&&W)&&"undefined"!=typeof ReactDOM&&ReactDOM.createPortal(React.createElement("div",{className:"bg-white border-2 border-gray-300 rounded-lg shadow-2xl overflow-y-auto",style:{position:"absolute",zIndex:99999,top:F.top+2+"px",left:F.left+"px",width:F.width+"px",minWidth:"320px",maxHeight:"400px"},onMouseDown:e=>e.stopPropagation(),onTouchStart:()=>{document.activeElement===Q.current&&Q.current?.blur()}},React.createElement("div",{className:"sticky top-0 right-0 float-right bg-white p-2 m-2 rounded-full shadow-md z-10"},React.createElement("button",{onClick:e=>{e.stopPropagation(),A(!1),V(!1)}},React.createElement("i",{className:"fas fa-times text-sm"}))),D.map(e=>React.createElement("div",{key:"kw-"+e.id,className:"p-3 border-b hover:bg-red-50 cursor-pointer",onClick:()=>{J(P),k(e.id),A(!1),V(!1)}},e.title)),q.map(e=>React.createElement("div",{key:"txt-"+e.id,className:"p-3 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{J(P),k(e.id),A(!1),V(!1)}},e.title)),!P&&W&&React.createElement("div",{className:"p-2"},React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"px-2 py-1 text-xs font-bold text-gray-400 uppercase tracking-widest flex justify-between items-center"},"Récents",B.length>0&&React.createElement("button",{onClick:e=>{e.stopPropagation(),H([]),localStorage.removeItem("search_history")},className:"text-[10px] text-red-400 hover:text-red-600"},"Effacer")),0===B.length?React.createElement("div",{className:"px-3 py-2 text-xs text-gray-400 italic"},"Vos dernières recherches apparaîtront ici..."):B.map(e=>React.createElement("div",{key:e,onClick:()=>{O(e),me({target:{value:e}})},className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group text-gray-600 hover:text-blue-600"},React.createElement("i",{className:"fas fa-history text-gray-300 group-hover:text-blue-400"}),React.createElement("span",{className:"font-medium"},e)))),React.createElement("div",{},React.createElement("div",{className:"px-2 py-1 text-xs font-bold text-gray-400 uppercase tracking-widest"},"Filtres Rapides"),React.createElement("div",{className:"grid grid-cols-2 gap-2 mt-1"},React.createElement("button",{onClick:()=>{O("urgent"),me({target:{value:"urgent"}})},className:"flex items-center justify-center gap-2 p-2 bg-red-50 text-red-600 rounded-lg border border-red-100 hover:bg-red-100 transition"},React.createElement("i",{className:"fas fa-fire"}),"Urgent"),React.createElement("button",{onClick:()=>{O("retard"),me({target:{value:"retard"}})},className:"flex items-center justify-center gap-2 p-2 bg-orange-50 text-orange-600 rounded-lg border border-orange-100 hover:bg-orange-100 transition"},React.createElement("i",{className:"fas fa-clock"}),"Retard"),React.createElement("button",{onClick:()=>{O("panne"),me({target:{value:"panne"}})},className:"flex items-center justify-center gap-2 p-2 bg-gray-50 text-gray-600 rounded-lg border border-gray-200 hover:bg-gray-100 transition"},React.createElement("i",{className:"fas fa-tools"}),"Panne"),React.createElement("button",{onClick:()=>{O("maintenance"),me({target:{value:"maintenance"}})},className:"flex items-center justify-center gap-2 p-2 bg-blue-50 text-blue-600 rounded-lg border border-blue-100 hover:bg-blue-100 transition"},React.createElement("i",{className:"fas fa-wrench"}),"Maint."))))),document.body),l&&"undefined"!=typeof ReactDOM&&ReactDOM.createPortal(React.createElement("div",{className:"fixed inset-0 z-[9999]",onClick:()=>n(!1)},React.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/60 via-slate-800/50 to-slate-900/60 backdrop-blur-md"}),React.createElement("div",{className:"absolute top-0 right-0 h-full w-[88%] max-w-[340px] bg-gradient-to-b from-slate-50 to-white flex flex-col overflow-hidden shadow-[-8px_0_30px_-5px_rgba(0,0,0,0.3)]",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"relative px-5 pt-5 pb-4 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800"},React.createElement("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white/80 hover:text-white transition-all"},React.createElement("i",{className:"fas fa-times text-sm"})),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("img",{src:"/api/auth/avatar/"+(S?.id||0)+"?v="+(S?.avatar_key||"default"),alt:S?.first_name||"Avatar",className:"w-12 h-12 rounded-2xl object-cover shadow-lg shadow-blue-500/30 border-2 border-white/20 bg-gradient-to-br from-blue-400 to-indigo-600"}),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("h3",{className:"text-white font-bold text-base truncate"},S?.first_name||"Utilisateur"),React.createElement("p",{className:"text-slate-400 text-xs truncate"},S?.email||""))),S?.role&&React.createElement("div",{className:"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider "+("admin"===S?.role?"bg-amber-500/20 text-amber-300":"supervisor"===S?.role?"bg-blue-500/20 text-blue-300":"bg-slate-500/20 text-slate-300")},React.createElement("i",{className:"fas fa-shield-alt text-[8px]"}),"admin"===S?.role?"Administrateur":"supervisor"===S?.role?"Superviseur":"technician"===S?.role?"Technicien":"Opérateur")),React.createElement("div",{className:"flex-1 overflow-y-auto px-4 py-4",style:{WebkitOverflowScrolling:"touch"}},React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1"},"Actions rapides"),React.createElement("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},React.createElement("button",{onClick:()=>{p(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-orange-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center shadow-md shadow-orange-500/20"},React.createElement("i",{className:"fas fa-clock text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Tickets en Retard")),fe&&React.createElement("button",{onClick:()=>{b(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-blue-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center shadow-md shadow-blue-500/20"},React.createElement("i",{className:"fas fa-chart-line text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Statistiques Performance")),React.createElement("button",{onClick:()=>{ne()},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center shadow-md "+("granted"===Z&&ee?"bg-gradient-to-br from-teal-400 to-emerald-500 shadow-teal-500/20":"bg-gradient-to-br from-slate-300 to-slate-400 shadow-slate-400/20")},React.createElement("i",{className:"fas fa-bell text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Notifications Push"),React.createElement("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold "+("granted"===Z&&ee?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500")},"granted"===Z&&ee?"ON":"OFF")),ue&&React.createElement("button",{onClick:()=>{g(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-violet-400 to-purple-500 flex items-center justify-center shadow-md shadow-violet-500/20"},React.createElement("i",{className:"fas fa-mobile-alt text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Gérer mes appareils")),React.createElement("button",{onClick:()=>{N(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-purple-50/50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center shadow-md shadow-purple-500/20"},React.createElement("i",{className:"fas fa-robot text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Expert Industriel (IA)")),React.createElement("button",{onClick:()=>{o(!c),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center shadow-md shadow-slate-400/20"},React.createElement("i",{className:"fas fa-archive text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Voir les tickets archivés")))),React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1"},"Gestion"),React.createElement("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},(ie("users.read")||"technician"===S?.role)&&React.createElement("button",{onClick:()=>{h(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-400 to-blue-500 flex items-center justify-center shadow-md shadow-indigo-500/20"},React.createElement("i",{className:"fas fa-users text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Gestion Utilisateurs")),ie("machines.read")&&C.machines&&React.createElement("button",{onClick:()=>{x(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center shadow-md shadow-teal-500/20"},React.createElement("i",{className:"fas fa-cogs text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Gestion Machines")),ue&&ie("settings.manage")&&React.createElement("button",{onClick:()=>{w(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-400 to-slate-600 flex items-center justify-center shadow-md shadow-slate-500/20"},React.createElement("i",{className:"fas fa-columns text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Colonnes Kanban")),ie("planning.read")&&C.planning&&React.createElement("button",{onClick:()=>{y(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors border-b border-slate-100"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center shadow-md shadow-blue-500/20"},React.createElement("i",{className:"fas fa-calendar-alt text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Planning Production")),ue&&ie("settings.manage")&&React.createElement("button",{onClick:()=>{R(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3.5 hover:bg-slate-50 transition-colors"},React.createElement("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-slate-500 to-slate-700 flex items-center justify-center shadow-md shadow-slate-600/20"},React.createElement("i",{className:"fas fa-cog text-white text-sm"})),React.createElement("span",{className:"flex-1 text-left text-sm font-semibold text-slate-700"},"Paramètres Système")))),React.createElement("div",{className:"mb-5"},React.createElement("button",{onClick:()=>{window.open("/messenger","_blank"),n(!1)},className:"w-full flex items-center gap-3 px-4 py-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center"},React.createElement("i",{className:"fas fa-rocket text-white text-lg"})),React.createElement("div",{className:"flex-1 text-left"},React.createElement("span",{className:"text-white font-bold text-sm block"},re),React.createElement("span",{className:"text-emerald-100 text-[10px]"},"Messagerie instantanée")),React.createElement("span",{className:"px-2 py-1 bg-white/20 rounded-lg text-[9px] font-bold text-white uppercase"},"New")))),React.createElement("div",{className:"px-4 py-4 bg-slate-50 border-t border-slate-200"},React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{i(),n(!1)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 font-semibold text-sm hover:bg-slate-50 active:scale-95 transition-all shadow-sm"},React.createElement("i",{className:"fas fa-sync-alt"}),"Actualiser"),React.createElement("button",{onClick:()=>{m(),n(!1)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-slate-800 rounded-xl text-white font-semibold text-sm hover:bg-slate-700 active:scale-95 transition-all shadow-sm"},React.createElement("i",{className:"fas fa-sign-out-alt"}),"Déconnexion"))))),document.body))};window.AppHeader=AppHeader;