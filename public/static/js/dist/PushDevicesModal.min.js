const PushDevicesModal=({show:e,onClose:t})=>{const[a,s]=React.useState(!0),[l,c]=React.useState([]);React.useEffect(()=>{e&&r()},[e]);const r=async()=>{try{s(!0);const e=await fetch("/api/push/subscriptions-list",{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}),t=await e.json();c(t.subscriptions||[]),i(t.isAdminView||!1)}catch(e){console.error("Erreur chargement appareils:",e)}finally{s(!1)}},[n,i]=React.useState(!1),m=e=>{if(!e)return"fa-mobile-alt";const t=e.toLowerCase();return t.includes("mobile")||t.includes("phone")?"fa-mobile-alt":t.includes("tablet")||t.includes("ipad")?"fa-tablet-alt":t.includes("desktop")||t.includes("windows")?"fa-desktop":t.includes("laptop")||t.includes("mac")?"fa-laptop":"fa-mobile-alt"};return e?React.createElement("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-2 sm:p-4",onClick:t},React.createElement("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"bg-gradient-to-r from-teal-700 to-teal-800 text-white p-4 sm:p-6"},React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",{},React.createElement("h2",{className:"text-lg sm:text-2xl font-bold flex items-center gap-2"},React.createElement("i",{className:"fas fa-bell"}),n?"Tous les Appareils (Admin)":"Mes Appareils"),React.createElement("p",{className:"text-teal-200 text-xs sm:text-sm mt-1"},n?"Gestion de tous les appareils enregistrés":"Gérez vos appareils connectés")),React.createElement("button",{className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-8 h-8 flex items-center justify-center transition-colors",onClick:t},React.createElement("i",{className:"fas fa-times"})))),React.createElement("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(90vh-100px)] sm:max-h-[calc(90vh-120px)]"},a?React.createElement("div",{className:"text-center py-12"},React.createElement("i",{className:"fas fa-spinner fa-spin text-4xl text-teal-600 mb-4"}),React.createElement("p",{className:"text-gray-600"},"Chargement des appareils...")):l.length>0?React.createElement("div",{className:"space-y-3 sm:space-y-4"},React.createElement("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement("i",{className:"fas fa-info-circle text-teal-700"}),React.createElement("h4",{className:"font-semibold text-gray-800"},"Résumé")),React.createElement("p",{className:"text-xs sm:text-sm text-gray-700"},React.createElement("span",{className:"font-bold text-teal-800"},l.length)," appareil(s) enregistré(s) pour recevoir les notifications push.")),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},l.map((e,t)=>{return React.createElement("div",{key:e.id,className:"border-2 border-teal-200 rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow bg-gradient-to-br from-teal-50 to-white"},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("div",{className:"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0"},React.createElement("i",{className:"fas "+m(e.device_type)+" text-teal-700 text-xl"})),React.createElement("div",{className:"flex-1"},React.createElement("h3",{className:"font-bold text-gray-800 mb-1"},(a=e.device_type,e.device_name||a||"Appareil inconnu")),React.createElement("p",{className:"text-xs text-gray-500 mb-2"},"Utilisateur: "+(e.user_full_name||"Inconnu")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-teal-100 text-teal-700"},React.createElement("i",{className:"fas fa-check-circle mr-1"}),"Actif")))));var a}))):React.createElement("div",{className:"text-center py-12 bg-gray-50 rounded-lg"},React.createElement("i",{className:"fas fa-mobile-alt text-5xl text-gray-300 mb-4"}),React.createElement("p",{className:"text-gray-600 font-medium"},"Aucun appareil enregistré"),React.createElement("p",{className:"text-sm text-gray-500 mt-2"},"Les appareils apparaîtront ici une fois les notifications push activées."))))):null};