console.log("TVDashboardModal loaded v1.0.0");const TVDashboardModal=({isOpen:e,onClose:t})=>{const[a,r]=React.useState(!0),[c,l]=React.useState(""),[n,s]=React.useState(""),[o,i]=React.useState(!1),[m,d]=React.useState(!1),[u,x]=React.useState(null);React.useEffect(()=>{e&&g()},[e]);const g=async()=>{r(!0),x(null);try{const e=localStorage.getItem("auth_token"),t=await axios.get("/api/tv/admin/config",{headers:{Authorization:`Bearer ${e}`}});t.data&&(l(t.data.url||""),s(t.data.key||""))}catch(e){console.error("Erreur chargement config TV:",e),x("Impossible de charger la configuration TV")}finally{r(!1)}};return e?React.createElement("div",{className:"fixed inset-0 z-[300] overflow-y-auto",style:{background:"rgba(0, 0, 0, 0.5)"},onClick:t},React.createElement("div",{className:"min-h-screen px-4 py-8 flex items-center justify-center"},React.createElement("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl relative",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"px-6 py-5 border-b border-gray-100 flex justify-between items-center"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center"},React.createElement("i",{className:"fas fa-tv text-blue-600 text-lg"})),React.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Mode Affichage TV")),React.createElement("button",{onClick:t,className:"w-9 h-9 flex items-center justify-center rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition"},React.createElement("i",{className:"fas fa-times text-lg"}))),React.createElement("div",{className:"p-6 space-y-5"},a?React.createElement("div",{className:"flex items-center justify-center py-8"},React.createElement("i",{className:"fas fa-spinner fa-spin text-3xl text-blue-500"})):u?React.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center"},React.createElement("i",{className:"fas fa-exclamation-circle text-red-500 text-2xl mb-2"}),React.createElement("p",{className:"text-sm text-red-700"},u),React.createElement("button",{onClick:g,className:"mt-3 px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700"},"Réessayer")):React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-gray-50 rounded-xl p-4"},React.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Lien d'accès sécurisé pour l'écran TV :"),React.createElement("div",{className:"flex gap-2"},React.createElement("input",{type:"text",value:c,readOnly:!0,className:"flex-1 px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm text-gray-700 font-mono truncate"}),React.createElement("button",{onClick:async()=>{try{await navigator.clipboard.writeText(c),d(!0),window.showToast&&window.showToast("Lien copié !","success"),setTimeout(()=>d(!1),2e3)}catch(e){const t=document.createElement("textarea");t.value=c,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),d(!0),setTimeout(()=>d(!1),2e3)}},className:"px-4 py-3 rounded-xl font-medium transition flex items-center justify-center "+(m?"bg-green-500 text-white":"bg-blue-600 text-white hover:bg-blue-700"),title:"Copier le lien"},React.createElement("i",{className:"fas "+(m?"fa-check":"fa-copy")})))),React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("button",{onClick:()=>{window.open(c,"_blank")},className:"flex flex-col items-center gap-2 p-4 bg-white border-2 border-dashed border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 transition group"},React.createElement("i",{className:"fas fa-external-link-alt text-2xl text-gray-400 group-hover:text-blue-500 transition"}),React.createElement("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700"},"Ouvrir l'affichage")),React.createElement("button",{onClick:async()=>{if(window.confirm("Régénérer la clé ? L'ancien lien ne fonctionnera plus.")){i(!0),x(null);try{const e=localStorage.getItem("auth_token"),t=await axios.post("/api/tv/admin/regenerate",{},{headers:{Authorization:`Bearer ${e}`}});t.data&&(l(t.data.url||""),s(t.data.key||""),window.showToast&&window.showToast("Nouvelle clé générée avec succès","success"))}catch(e){console.error("Erreur régénération clé:",e),x("Impossible de régénérer la clé")}finally{i(!1)}}},disabled:o,className:"flex flex-col items-center gap-2 p-4 bg-white border-2 border-dashed border-gray-200 rounded-xl hover:border-orange-400 hover:bg-orange-50 transition group disabled:opacity-50"},React.createElement("i",{className:`fas ${o?"fa-spinner fa-spin":"fa-sync-alt"} text-2xl text-gray-400 group-hover:text-orange-500 transition`}),React.createElement("span",{className:"text-sm font-medium text-gray-700 group-hover:text-orange-700"},o?"Génération...":"Régénérer la Clé"))),React.createElement("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl"},React.createElement("i",{className:"fas fa-shield-alt text-amber-500 mt-0.5"}),React.createElement("p",{className:"text-xs text-amber-700"},"Ce lien contient une clé d'accès. Ne le partagez qu'aux personnes autorisées.")))),React.createElement("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50 rounded-b-2xl"},React.createElement("button",{onClick:t,className:"w-full px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition"},"Fermer"))))):null};window.TVDashboardModal=TVDashboardModal;