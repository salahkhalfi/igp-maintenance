const ManageColumnsModal=({show:e,onClose:t,columns:a,onSave:l})=>{const[r,o]=React.useState([]),[n,s]=React.useState(""),c={blue:"Bleu",green:"Vert",red:"Rouge",yellow:"Jaune",orange:"Orange",purple:"Violet",gray:"Gris",indigo:"Indigo",pink:"Rose",teal:"Turquoise"};React.useEffect(()=>{e&&a&&o(JSON.parse(JSON.stringify(a)))},[e,a]);const d=(e,t)=>{const a=[...r];"up"===t&&e>0?[a[e],a[e-1]]=[a[e-1],a[e]]:"down"===t&&e<a.length-1&&([a[e],a[e+1]]=[a[e+1],a[e]]),o(a)},m=(e,t,a)=>{const l=[...r];l[e]={...l[e],[t]:a},o(l)};return e?React.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-2 sm:p-4"},React.createElement("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col"},React.createElement("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl"},React.createElement("h3",{className:"font-bold text-lg"},"Gérer les Colonnes"),React.createElement("button",{onClick:t},React.createElement("i",{className:"fas fa-times"}))),React.createElement("div",{className:"p-2 sm:p-4 overflow-y-auto flex-1"},React.createElement("div",{className:"space-y-3 sm:space-y-2"},r.map((e,t)=>React.createElement("div",{key:e.key,className:"flex flex-wrap sm:flex-nowrap items-center gap-2 p-3 bg-gray-50 border rounded-lg shadow-sm sm:shadow-none"},React.createElement("input",{type:"text",value:e.label,onChange:e=>m(t,"label",e.target.value),className:"w-full sm:w-auto sm:flex-1 px-2 py-1.5 text-base sm:text-sm border rounded font-bold order-1 sm:order-3 bg-white",placeholder:"Nom de la colonne"}),React.createElement("div",{className:"flex sm:flex-col gap-2 sm:gap-1 order-2 sm:order-1 mr-2 sm:mr-0"},React.createElement("button",{disabled:0===t,onClick:()=>d(t,"up"),className:"p-1 bg-white border rounded sm:border-none sm:bg-transparent text-gray-400 hover:text-blue-600 disabled:opacity-30"},React.createElement("i",{className:"fas fa-chevron-up text-sm sm:text-xs"})),React.createElement("button",{disabled:t===r.length-1,onClick:()=>d(t,"down"),className:"p-1 bg-white border rounded sm:border-none sm:bg-transparent text-gray-400 hover:text-blue-600 disabled:opacity-30"},React.createElement("i",{className:"fas fa-chevron-down text-sm sm:text-xs"}))),React.createElement("div",{className:"w-[40%] sm:w-32 order-3 sm:order-2"},React.createElement("input",{type:"text",value:e.icon,onChange:e=>m(t,"icon",e.target.value),className:"w-full px-2 py-1.5 text-sm border rounded bg-white",placeholder:"fa-icon"}),React.createElement("div",{className:"text-[10px] text-gray-500 text-center mt-0.5 hidden sm:block"},React.createElement("i",{className:"fas fa-"+e.icon}))),React.createElement("select",{value:e.color,onChange:e=>m(t,"color",e.target.value),className:"w-[40%] sm:w-auto px-2 py-1.5 text-sm border rounded font-bold text-"+e.color+"-800 bg-"+e.color+"-100 order-4 sm:order-2"},Object.entries(c).map(([e,t])=>React.createElement("option",{key:e,value:e},t))),React.createElement("button",{onClick:()=>{return t=e.key,void(["received","completed","archived"].includes(t)?alert("Ce statut système ne peut pas être supprimé."):confirm("ATTENTION : Avez-vous vérifié que cette colonne est VIDE ?\n\nSi vous supprimez une colonne contenant des tickets, ils deviendront INVISIBLES (fantômes) mais resteront dans la base de données.\n\nÊtes-vous sûr de vouloir continuer ?")&&o(r.filter(e=>e.key!==t)));var t},disabled:["received","completed","archived"].includes(e.key),className:"p-2 ml-auto sm:ml-0 text-red-500 hover:bg-red-100 rounded disabled:opacity-30 disabled:cursor-not-allowed order-5 sm:order-4"},React.createElement("i",{className:"fas fa-trash"})),React.createElement("span",{className:"hidden sm:block text-xs text-gray-400 font-mono w-24 truncate order-last",title:e.key},e.key)))),React.createElement("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim())return;const t={key:n.toLowerCase().replace(/[^a-z0-9]/g,"_")+"_"+Date.now().toString().slice(-4),label:n,icon:"circle",color:"gray"},a=r.findIndex(e=>"completed"===e.key),l=[...r];-1!==a?l.splice(a,0,t):l.push(t),o(l),s("")},className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100"},React.createElement("h4",{className:"font-bold text-sm text-blue-800 mb-2"},"Ajouter une colonne"),React.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},React.createElement("input",{type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"Nom de la colonne...",className:"flex-1 px-3 py-2 border rounded-lg"}),React.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 w-full sm:w-auto"},"Ajouter")))),React.createElement("div",{className:"p-4 border-t bg-gray-50 rounded-b-xl flex justify-end gap-2"},React.createElement("button",{onClick:t,className:"px-4 py-2 text-gray-600 font-bold hover:bg-gray-200 rounded-lg"},"Annuler"),React.createElement("button",{onClick:()=>{l(r),t()},className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md"},"Enregistrer")))):null};window.ManageColumnsModal=ManageColumnsModal;