const MoveTicketBottomSheet=({show:e,onClose:t,ticket:a,onMove:l,onDelete:o,currentUser:r})=>{const[c,n]=React.useState([]);React.useEffect(()=>{e&&(()=>{const e=localStorage.getItem("kanban_columns");if(e)try{const t=JSON.parse(e).map(e=>({...e,icon:e.icon||("received"===e.key?"inbox":"completed"===e.key?"check":"folder"),color:e.color||"blue"}));n(t)}catch(e){console.error("Error parsing columns",e),s()}else s()})()},[e]);const s=()=>{n([{key:"received",label:"Requête Reçue",icon:"inbox",color:"blue"},{key:"diagnostic",label:"Diagnostic",icon:"stethoscope",color:"yellow"},{key:"in_progress",label:"En Cours",icon:"tools",color:"orange"},{key:"waiting_parts",label:"En Attente Pièces",icon:"box",color:"purple"},{key:"completed",label:"Terminé",icon:"check",color:"green"},{key:"archived",label:"Archivé",icon:"archive",color:"gray"}])};if(!e||!a)return null;const i=null!==a.assigned_to&&void 0!==a.assigned_to,m=i&&a.scheduled_date;return React.createElement("div",{className:"fixed inset-0 z-[100] flex items-end bottom-sheet-backdrop no-tap-highlight",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:t},React.createElement("div",{className:"bg-white w-full rounded-t-3xl shadow-2xl bottom-sheet-content flex flex-col",style:{maxHeight:"85dvh",minHeight:"30dvh"},onClick:e=>e.stopPropagation()},React.createElement("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100 shrink-0 rounded-t-3xl"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("h3",{className:"text-lg font-bold text-gray-800"},"Déplacer le ticket"),React.createElement("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl leading-none p-2 no-tap-highlight",type:"button"},"×")),React.createElement("div",{className:"text-sm"},React.createElement("div",{className:"font-mono text-xs text-gray-600"},a.ticket_id),React.createElement("div",{className:"font-semibold text-gray-800 mt-1 truncate"},a.title)),i?React.createElement("div",{className:"mt-2 text-xs px-2 py-1 rounded "+(m?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700")},m?"ℹ️ Ticket planifié - Déplacement manuel possible":"ℹ️ Ticket assigné - Déplacement manuel possible"):null),React.createElement("div",{className:"p-4 space-y-2 overflow-y-auto flex-1 min-h-0"},c.map(e=>React.createElement("button",{key:e.key,onClick:()=>(async e=>{e!==a.status?(navigator.vibrate&&navigator.vibrate(30),await l(a,e),t()):t()})(e.key),disabled:e.key===a.status,className:"w-full p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-between no-tap-highlight mb-2 "+(e.key===a.status?"bg-gray-100 border-gray-300 opacity-50 cursor-not-allowed":"bg-"+(e.color||"blue")+"-50 border-"+(e.color||"blue")+"-100 hover:bg-"+(e.color||"blue")+"-100"),style:{minHeight:"60px"},type:"button"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white shadow-sm text-"+(e.color||"blue")+"-500"},React.createElement("i",{className:"fas fa-"+(e.icon||"circle")+" text-lg"})),React.createElement("span",{className:"font-semibold text-gray-800 text-left",style:{fontSize:"16px"}},e.label)),e.key===a.status&&React.createElement("i",{className:"fas fa-check text-green-600",style:{fontSize:"20px"}})))),React.createElement("div",{className:"p-4 border-t border-gray-200 space-y-2 shrink-0 pb-safe"},"admin"===r?.role||"supervisor"===r?.role||"technician"===r?.role||"operator"===r?.role&&a.reported_by===r?.id?React.createElement("button",{onClick:()=>{navigator.vibrate&&navigator.vibrate(50),o(a.id)},className:"w-full p-3 rounded-xl border-2 border-red-100 bg-red-50 text-red-700 font-semibold flex items-center justify-center gap-2 hover:bg-red-100 transition-colors"},React.createElement("i",{className:"fas fa-trash-alt"}),"Supprimer le ticket"):null,React.createElement("button",{onClick:t,className:"w-full p-3 rounded-xl border-2 border-gray-200 text-gray-700 font-semibold hover:bg-gray-50 transition-colors"},"Annuler"))))};