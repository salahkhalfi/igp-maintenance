const CreateUserForm=({onCancel:e,onSuccess:t,currentUserRole:a})=>{const[r,l]=React.useState(""),[o,n]=React.useState(""),[s,c]=React.useState(""),[i,m]=React.useState(""),[d,u]=React.useState("operator"),[b,g]=React.useState(""),[p,f]=React.useState(!1),R=e=>e.target.setCustomValidity("Veuillez remplir ce champ."),E=(e,t)=>{e.target.setCustomValidity(""),t(e.target.value)};return React.createElement("div",{className:"mb-6 p-6 bg-gradient-to-br from-blue-50 to-gray-50 rounded-xl shadow-lg border-2 border-blue-200/50 scroll-mt-4",ref:e=>e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},React.createElement("h3",{className:"text-xl font-bold mb-4"},"Nouvel utilisateur"),React.createElement("form",{onSubmit:async e=>{e.preventDefault(),f(!0);const a={email:r,password:o,first_name:s,last_name:i,role:d,ai_context:b||null};console.log("[UserForms] Creating user with payload:",JSON.stringify(a,null,2));try{await axios.post(API_URL+"/users",a),t()}catch(e){const t=e.response?.data?.error||"Erreur lors de la création",a=e.response?.data?.field||"",r=e.response?.data?.details;console.error("[UserForms] Error creating user:",{errMsg:t,errField:a,errDetails:r,fullResponse:e.response?.data}),alert("Erreur: "+t+(a?` (champ: ${a})`:""))}finally{f(!1)}}},React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"newEmail"},"Email"),React.createElement("input",{type:"email",id:"newEmail",name:"new_user_email",autoComplete:"off","data-lpignore":"true",value:r,onChange:e=>E(e,l),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all",required:!0,autoFocus:!0})),React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"newFirstName"},"Prénom"),React.createElement("input",{type:"text",id:"newFirstName",name:"newFirstName",autoComplete:"off",value:s,onChange:e=>E(e,c),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all",placeholder:"Jean",required:!0})),React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"newLastName"},"Nom (optionnel)"),React.createElement("input",{type:"text",id:"newLastName",name:"newLastName",autoComplete:"off",value:i,onChange:e=>E(e,m),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all",placeholder:"Dupont"}))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"newPassword"},"Mot de passe"),React.createElement("input",{type:"password",id:"newPassword",name:"new_user_password",autoComplete:"new-password","data-lpignore":"true",value:o,onChange:e=>E(e,n),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all",required:!0,minLength:8,placeholder:"Min. 8 caractères"})),React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2"},"Rôle"),React.createElement(RoleDropdown,{value:d,onChange:e=>u(e.target.value),disabled:!1,currentUserRole:a}))),React.createElement("div",{className:"mb-4"},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"newAiContext"},React.createElement("span",{},"Informations complémentaires "),React.createElement("span",{className:"text-gray-400 font-normal text-sm"},"(optionnel)")),React.createElement("textarea",{id:"newAiContext",name:"newAiContext",value:b,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all resize-none",placeholder:"Ex: Expert hydraulique, Certification BR, Travaille de nuit...",rows:2,maxLength:500}),React.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Ces informations permettent de personnaliser les interactions avec l'assistant.")),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{type:"button",onClick:e,className:"px-6 py-3 bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 text-gray-800 rounded-xl font-bold transition-all shadow-md border-t border-white/60"},"Annuler"),React.createElement("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 text-white rounded-xl font-bold transition-all shadow-md border-t border-blue-300/50 flex items-center gap-2 justify-center"},p&&React.createElement("i",{className:"fas fa-spinner fa-spin"}),"Créer"))))},EditUserForm=({user:e,onCancel:t,onSuccess:a,currentUserRole:r,currentUserId:l})=>{const[o,n]=React.useState(e.email),[s,c]=React.useState(e.first_name||""),[i,m]=React.useState(e.last_name||""),[d,u]=React.useState(e.role),[b,g]=React.useState(e.ai_context||""),[p,f]=React.useState(!1),R=e=>e.target.setCustomValidity("Veuillez remplir ce champ."),E=(e,t)=>{e.target.setCustomValidity(""),t(e.target.value)};return React.createElement("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg border-2 border-green-200/50 scroll-mt-4",ref:e=>e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},React.createElement("h3",{className:"text-xl font-bold mb-4"},"Modifier: "+e.full_name),React.createElement("form",{onSubmit:async t=>{t.preventDefault(),f(!0);try{await axios.put(API_URL+"/users/"+e.id,{email:o,first_name:s,last_name:i,role:d,ai_context:b||null}),a()}catch(e){alert("Erreur: "+(e.response?.data?.error||"Erreur"))}finally{f(!1)}}},React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"editEmail"},"Email"),React.createElement("input",{type:"email",id:"editEmail",name:"editEmail",autoComplete:"off",value:o,onChange:e=>E(e,n),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all",required:!0,autoFocus:!0})),React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"editFirstName"},"Prénom"),React.createElement("input",{type:"text",id:"editFirstName",name:"editFirstName",autoComplete:"off",value:s,onChange:e=>E(e,c),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all",placeholder:"Jean",required:!0})),React.createElement("div",{},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"editLastName"},"Nom (optionnel)"),React.createElement("input",{type:"text",id:"editLastName",name:"editLastName",autoComplete:"off",value:i,onChange:e=>E(e,m),onInvalid:R,className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all",placeholder:"Dupont"}))),React.createElement("div",{className:"mb-4"},React.createElement("label",{className:"block font-bold mb-2"},"Rôle"),React.createElement(RoleDropdown,{value:d,onChange:e=>u(e.target.value),disabled:e.id===l||"supervisor"===r&&"admin"===e.role,currentUserRole:r,variant:"green"})),React.createElement("div",{className:"mb-4"},React.createElement("label",{className:"block font-bold mb-2",htmlFor:"editAiContext"},React.createElement("span",{},"Informations complémentaires "),React.createElement("span",{className:"text-gray-400 font-normal text-sm"},"(optionnel)")),React.createElement("textarea",{id:"editAiContext",name:"editAiContext",value:b,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-white border-2 border-gray-300 rounded-lg shadow-sm focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all resize-none",placeholder:"Ex: Expert hydraulique, Certification BR, Travaille de nuit...",rows:2,maxLength:500}),React.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Ces informations permettent de personnaliser les interactions avec l'assistant.")),React.createElement("div",{className:"flex gap-4"},React.createElement("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gradient-to-br from-gray-100 via-gray-200 to-gray-300 text-gray-800 rounded-xl font-bold transition-all shadow-md border-t border-white/60"},"Annuler"),React.createElement("button",{type:"submit",disabled:p,className:"px-6 py-3 bg-gradient-to-br from-green-400 via-green-500 to-green-600 text-white rounded-xl font-bold transition-all shadow-md border-t border-green-300/50 flex items-center gap-2 justify-center"},p&&React.createElement("i",{className:"fas fa-spinner fa-spin"}),"Enregistrer"))))};window.CreateUserForm=CreateUserForm,window.EditUserForm=EditUserForm;